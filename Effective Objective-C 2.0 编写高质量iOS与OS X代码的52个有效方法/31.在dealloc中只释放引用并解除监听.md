# 在dealloc中只释放引用并解除监听
> 对象在经历其生命周期后，最终会为系统所回收，这时就要执行`dealloc`方法，每个对象的声明周期内，此方法仅执行一次

1. 运行期系统会在适当的时机调用`dealloc`方法，最好不要自己手动调用。

2. dealloc 中执行的内容：

	* 释放对象所拥有的引用，即所有OC对象都释放掉

	* 非OC对象需要手工释放
	* 清理所有配置过的观测行为（observation behavior）

3. 开销较大或系统内稀缺的资源（文件描述符、套接字、大块内存等）最好不要等到系统调用`dealloc`方法时才释放，应该是在应用程序用完资源对象后，手工实现方法来释放
4. 对于上述资源，最好添加释放标志，在dealloc中进行检测，以防忘记清理。 

5. 系统并不保证创建的每个对象都会执行`dealloc`方法。

6. 在`dealloc`方法中，尽量不要调用其他方法

7. 调用`dealloc`的线程，并不一定是主线程

8. 在`dealloc`方法中，禁止调用属性的存取方法，（MRC下释放属性变量的时候，要使用`_`，而不能是`self.`）

## 总结：

***1. 在`dealloc`方法中，只能做的是释放指向其他对象的引用，并取消原来订阅的“键值观测”（KVO）或`NSNotificationCenter`等通知，不要做其他事情***

***2. 如果对象持有文件描述符等系统资源，应该专门编写一个方法来释放此种资源，并约定为规则***

***3. 执行异步任务的方法不应再dealloc里调用；只能在正常状态下执行的方法也不应再dealloc里调用，因为此时对象已处于正在回收的状态***
	




