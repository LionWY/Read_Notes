# 尽量使用不可变对象

> 设计类的时候，应充分运用属性来封装数据，并且在使用属性时，尽可能的声明为“只读”（read-only），只有在确有必要时才将属性对外公布。

1. 把对象的属性设置为只读，对外使用对象时，就能肯定其底层数据不会改变，对象本身的数据结构也就不可能出现不一致的现象。


2. 即使属性设置为readonly，也应该指定内存管理语义（copy、weak、strong），方便以后修改。
3. 如果想内部修改对象的数据，而不想外部也可以改变，那么应该`.h`文件中将属性声明为readonly，`.m`文件中在对象的 ***分类*** 中声明为readwrite
4. 可以通过KVC技术，使用`setValue:forKey:`方法来修改不允许修改的属性/变量，但是容易出问题。
5. 对象的collection属性A，一般声明为只读不可变的，而在实现文件里，声明一个可变的collection属性/实例变量B，对外get获取方法中，A是B的一份拷贝。
6. 不要在返回的对象上查询类型以确定其是否可变，更不要进行不可变到可变的类型强转。

## 总结：
***1. 尽量创建不可变对象。***

***2. 若某属性仅可于对象内部修改，则在“class-continuation分类中将其readonly属性扩展为readwrite属性。***

***3. 不要把可变的collection所谓属性公开，而应该提供相关方法，以此修改对象中的可变collection。***

